# 工作空间

工作空间是多人协作的最小工作单位，类似于多人开发项目，在同一个项目下协作工作。工作空间中包含了建模以及辅助建模的相关功能模块。

##   管理工作空间

工作空间管理功能，提供对工作空间的一系列管理功能。一般仅工作空间管理员、拥有者才可进行此操作。

### 创建工作空间

创建工作空间的创建者拥有工作空间的最高权限。

![JPG](..\..\img\45.jpg)

操作流程简单，通过点击创建，输入工作空间的名称，即可完成创建。

### 添加备注信息

选中一个工作空间，在右上方可以看到操作菜单，点击“添加评论”即可编辑评论信息，添加评论之后重新选择此工作空间，可以再右下角看到添加的评论内容。

![JPG](..\..\img\46.jpg)

### 添加描述信息

打开工作空间，选择概要操作栏，点击“编辑设置”按钮。可以看到工作空间的一般设置界面，其中概要一栏是描述工作空间用途等概要简述的。如果有必要，可以通过此功能加入一些描述内容。

![JPG](..\..\img\47.jpg)

###  邀请工作成员

打开工作空间，选择概要操作栏，点击“编辑成员”按钮，可以看到成员添加页。成员添加的流程大致是，管理员邀请被添加人员，邀请发出被添加人员会在消息通知看到邀请信息，被邀请人员可以选择同意加入，可以选择不同意加入。无论选择同意还是不同意都会收到相关的事件信息，使管理员知晓。所以邀请成员一般在线下人员之间是有所沟通的。

![PNG](..\..\img\48.png)

邀请操作页面同时提供了踢出成员的功能，将已有成员移出成员列表保存之后，这个成员将被踢出，被踢出成员创建的工作空间资源将自动升级为管理员的资源。新添加的成员则仅是发出添加的邀请。

同时，由于邀请的特殊性，在人员搜索必须通过用户的email全名搜索，类似于添加好友时必须知道对方的电话号码。

![JPG](..\..\img\49.jpg)

邀请发出之后，被邀请人员在通知消息栏将看到邀请信息。

![JPG](..\..\img\50.jpg)

### 转让管理权

工作空间管理员可以将工作空间的管理权限转让给工作空间其他成员，转让之后，自己将成为工作空间的普通成员。并且此操作不可逆，如果不是必要请勿随意尝试此操作。

在工作空间概要页面，点击“编辑设置”按钮，进入工作空间设置操作页面。通过拥有者选择列表，选择拥有者账号，之后保存即可将工作空间的管理员权限转让给其他工作空间成员。

![JPG](..\..\img\51.jpg)

### 归档工作空间

一般的，一个工作空间仅承载一个具体的任务，一般一个研发任务完成，这个工作空间将不再需要更改。或者在项目进行中有一些重大的版本需要等待测试，工作空间的内容需要暂时停止修改时，可以通过归档功能将工作空间设置为只读状态。此操作可逆，归档之后可以通过相同的操作恢复工作空间的编辑权限。

同样的在工作空间的“编辑设置”页面，通过工作空间状态选择来设置工作空间的读写权限状态。

![JPG](..\..\img\52.jpg)

工作空间列表页默认展示活跃状态的工作空间，即可编辑的工作空间。一旦归档，默认不展示。

![JPG](..\..\img\53.jpg)

如果需要使用已经归档的工作空间，可以选择归档分类，以看到被归档的工作空间。

![JPG](..\..\img\54.jpg)

### 删除工作空间

删除操作将删除工作空间下所有内容，一旦删除将不可恢复。此操作相对危险，如果不是必要，请使用归档功能，用以在后续需要时恢复工作空间。

删除操作在两处可以操作，第一个地方是工作空间列表页，选择工作空间之后，在右上方可以看到删除操作的按钮。

![JPG](..\..\img\55.jpg)

另外一处是在打开工作空间之后，在概要页可以看到此操作按钮。

![JPG](..\..\img\56.jpg)

再次说明注意事项，删除操作不可逆，如果不是必要，请使用归档功能，以避免数据丢失。

## 工作空间数据

工作空间的数据对工作空间内所有成员开放可用。工作空间的所有成员，有权共享自己的数据到工作空间内，或从工作空间取消共享自己的数据。

### 数据共享与取消

打开工作空间，选择共享数据集页面，点击右上方的“共享数据集”操作按钮，就可以开始共享自己的数据到工作空间了。

![JPG](..\..\img\57.jpg)

取消共享的操作需要选择自己共享的数据，同样在右上方选择“解除共享”按钮，即可完成取消共享数据。

![JPG](..\..\img\58.jpg)

### 数据评论

工作空间的所有成员，可以对工作空间内的数据进行评论，添加备注信息。

![JPG](..\..\img\59.jpg)

##  工作文件

工作文件是通过工作流建模进行数据挖掘分析的基本工作单位，此章节仅说明工作文件对象的基本操作，基本管理功能。如果需要了解详细的建模操作方案，操作步骤，请参考“工作流建模”章节。

###  权限

工作文件根据创建者不同存在一些权限限制。首先是创建者，创建者拥有全部的权限，包括修改编辑内容，删除等操作。

工作成员不可以修改编辑别人的工作文件，如果想要对别人的工作文件内容进行修改，只能通过复制功能复制一个副本，然后针对副本进行修改。虽然没有编辑权限，但是成员之间有工作文件的执行和阅读权限，包括工作文件的执行结果的阅读权限。

选中自己的工作文件，右上方的工具箱操作栏包含重命名和删除操作。

![JPG](..\..\img\60.jpg)

而选中别人的工作文件就只有只读操作的按钮了

![JPG](..\..\img\61.jpg)

### 创建

进入工作空间，默认会进入工作文件操作页面。在此页面可以通过右上方创建按钮开始创建一个工作文件。

![JPG](..\..\img\62.jpg)

### 复制

选中一个工作文件，可以在右上方部分看到工作文件的操作栏，通过点击复制按钮即可复制一个相同内容的 工作文件。复制功能用于编辑重构别人的工作文件的情况。

![JPG](..\..\img\63.jpg)

### 导出和导入

工作流可以被导出下载，保存为一个特定格式的文件。导出后可以通过导入功能将工作文件导入到系统中。一般导出导入功能用于将工作文件批量迁移到另一个工作空间，或从一套系统迁移到另外一套系统使用。

选中需要导出的工作文件，点击右上方操作栏中的导出按钮，即可开始导出工作文件。点击导出按钮之后，将弹出新页面，用于下载文件。下载的文件是一个压缩文件包zip文件。

![JPG](..\..\img\64.jpg)

导入的工作文件只能是通过导出得到的工作文件，如果使用其他文件格式错误将导致工作文件无法正常使用。将导出下载的zip压缩文件解压，将得到具体的工作文件内容，之后进入工作文件页面，可以在“创建”按钮旁边有一个导入按钮，点击导入按钮即可开始导入工作文件。

![JPG](..\..\img\65.jpg)

### 工作文件评论

评论操作和数据对象的评论操作时一样的。选择一个工作文件，点击右上方“添加评论”按钮，即可开始对工作文件添加评论内容。

![JPG](..\..\img\66.jpg)

## 工作流建模

工作流建模部分是产品系统提供的核心功能，通过构建工作流的方式实现建模流程的表达。表达完成的工作流可直接用于运行，将人工描述的内容直接用于程序，简化了数据挖掘过程的程序代码开发过程。

系统中提供了多种算法，各中数据预处理算子，构建的工作流以分布式方式在大数据平台内执行计算，依赖大数据平台的计算能力快速得出模型结果，快速验证模型效果。

此章节仅介绍系统提供的建模功能，详细的建模方法，各种算法的功能含义，各类算法的使用本章不做说明。

### 数据

在工作流编辑也可以看到一个数据模块，数据模块展示的数据列表就是工作空间中共享进来的内容。在工作流编辑页中，操作办法基本都是拖拽的方式实现的。

在数据上按住左键拖拽到画布之后松开左键，完成数据使用数据的工作流编辑。

![JPG](..\..\img\67.jpg)

使用过程中如果在数据中未找到需要使用到 数据，通过按钮“共享数据集”启动共享数据功能，共享数据到工作空间。

![JPG](..\..\img\68.jpg)

### 算子

工作流编辑页默认看到的列表是算子列表，和数据操作类似，通过鼠标拖拽算子到工作流画布页面。

算子列表的外层是算子类别分组，默认包含Spark算子和TensorFlow算子，算子类别之下是算子属性分组，分组之下便是算子。

![JPG](..\..\img\69.jpg)

双击算子，在右边栏中编辑设置算子的参数。

![JPG](..\..\img\70.jpg)

不同的算子的参数列表是不同的，具体的参数设置含义可以参考算子的帮助文档。算子的帮助文档需要双击算子，在算子参数编辑页的页头可以看到一个“问号按钮”。点击问号按钮，即可看到算子的说明文档。

![JPG](..\..\img\71.jpg)

### 模型

在工作流页面使用持久化模型的算子执行之后，就会在模型模块看到持久化出来的模型。

类似的如下图，下图仅展示参考。

![JPG](..\..\img\72.jpg)

### 保存

当一个工作流编辑完成之后，编辑页脚部位，可以看到一些功能按钮。保存功能用于持久化工作流，下次打开内容不丢失。

![JPG](..\..\img\73.jpg)

### 执行

通过点击执行按钮，将工作流执行起来。

![JPG](..\..\img\74.jpg)

执行之后，执行按钮将变成停止按钮。用来停止工作流的执行。

![JPG](..\..\img\75.jpg)

###  执行报告

当工作流执行起来之后，可以通过报告也，监控工作流的执行状态。

![JPG](..\..\img\76.jpg)

### 结果预览

工作流执行之后，有一些算子可以提供一些数据用于预览，以人工确认算法的优劣，数据结构等信息。

例如“DataView”算子，可以用来预览数据的一般统计信息。预览操作时，双击右侧的算子输出端口。

![JPG](..\..\img\77.jpg)

双击之后可以看到数据预览的结果页。

![JPG](..\..\img\78.jpg)

同样的，“PerformanceClassification”算子也具备一些View信息，操作方法一样，双击右侧算子输出按钮。

![JPG](..\..\img\79.jpg)

得到的视图内容，不同算子展示的内容各有不同。

![JPG](..\..\img\80.jpg)

### 复制

复制的功能，已经废弃，其功能一般不使用，不再提供详细说明。

## 模型与服务

通过工作流执行，持久化出来的模型可以直接发布为服务。模型发布为服务的操作在工作空间中的模型和模型服务页面。模型页面，展示已经持久化的出来的模型列表。

![JPG](..\..\img\81.jpg)

模型服务页面则展示了发布的模型服务列表，包括服务的访问地址等信息。

![JPG](..\..\img\82.jpg)

### 管理模型

模型可以下载保存为文件，再上传到系统。这个功能也是用于模型在工作空间之间，在系统之间进行对象迁移的一个功能。

选中模型，点击右上方的下载按钮，即可开始下载操作。

![JPG](..\..\img\83.jpg)

在模型页面，点击上传模型，根据后续提示操作，即可完成一个模型的上传操作。需要注意的是，上传的模型必须是通过系统下载的模型，其他模型文件可能导致无法识别问题。

![JPG](..\..\img\84.jpg)

选中模型之后，在操作栏还可以看到删除按钮，模型版本太旧等问题没有什么用的话，可以直接删除，模型删除之后不可恢复。

![JPG](..\..\img\85.jpg)

### 发布服务

选中需要发布的模型，在点击发布按钮，即可将模型发布为一个服务。每一个模型只可以被发布一次，如果出现多次发布的操作，回得到错误提醒。

![JPG](..\..\img\86.jpg)

发布完成之后，在模型服务也可以看到发布的模型服务列表。

![JPG](..\..\img\87.jpg)

模型服务提供Restful标准的接口，详细的接口使用参考模型服务接口文档。TensorFlow的模型提供了，一个服务说明文档，点击链接即可看到模型服务的说明页。

![JPG](..\..\img\88.jpg)

##  调度任务

### 任务概述

工作流执行会消耗大数据平台的计算能力，为了避开计算高峰导致大数据平台资源吃紧可以使用调度任务，在半夜或其他资源空闲阶段去执行工作流。

任务提供了定时，反复的批量执行工作流的能力。通过设置时间段，以及间隔时间，以反复批量的调度工作流的执行。

### 新建任务

在工作空间的任务页面点击创建即可开始创建一个调度任务。

![JPG](..\..\img\89.jpg)

任务分为手动调度和自动调度，手动调度只可以手动点击“启动执行”按钮以触发任务的执行，而自动调度则由系统按照预先设置的时间，自动启动任务到执行。自动调度还可以设置停止调度时间，在时间点之后，任务不再被调度执行。

![JPG](..\..\img\90.jpg)

如果系统有开启邮件系统，在任务执行完成之后，可以以邮件的形式发送任务执行报告到用户的邮箱。

![JPG](..\..\img\91.jpg)

### 添加工作流

任务创建之后默认是空任务，此时需要通过添加工作流将真正需要执行的工作文件加入到任务的调度中去。

![JPG](..\..\img\92.jpg)

### 禁用与启用

任务调度默认是开启的，可以通过关闭调度以关闭任务的调度执行。

![JPG](..\..\img\93.jpg)

同样的被关闭调度的任务，可以通过“开启调度”重新恢复调度执行。

![JPG](..\..\img\94.jpg)

## Notebook

系统提供一个外部服务，此服务提供了用于单机编写Python代码执行的功能，用以辅助一些特殊需求的数据挖掘工作。需要注意的是，每一个用户有且仅有一个Notebook服务，无论在哪一个工作空间下，用户打开的Notebook服务都是他自己的服务。

在工作空间Notebook页面点击启动Notebook。启动时间较长，启动过程要稍微等一等，服务启动之后会自动跳转到Notebook服务页面中。

启动完成之后在工作空间的Notebook页面可以看到，进入和停止Notebook的按钮。

![JPG](..\..\img\95.jpg)

进入Notebook页面之后，大致可以看到一个基本操作页面。

![JPG](..\..\img\96.jpg)

通过new一个python3终端即可开始编辑Python代码。

![JPG](..\..\img\97.jpg)

创建完成之后，可以看到如下的编辑页面。通过编辑代码，点击运行即可执行自己的Python代码。

![JPG](..\..\img\98.jpg)
